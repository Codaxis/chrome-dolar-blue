<!DOCTYPE html>
<html ng-app="dbiPopup" ng-csp>
<head>
<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata:400,700">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
	<link rel="stylesheet" href="/css/extension.css">
</head>
<body class="popup" ng-class="{calculator: vm.calculatorMode}" ng-controller="PopupCtrl as vm">
	<div class="container-fluid">
		<h4 id="header"><img src="/images/icon-24.png" alt="">
			Dólar al instante

			<div id="calculator-toggle" class="ng-cloak">
				<label class="btn btn-xs {{vm.calculatorMode ? 'btn-primary' : 'btn-default'}}">
					<input type="checkbox" ng-model="vm.calculatorMode" autocomplete="off">
					<i class="fa fa-calculator"></i> Modo calculadora
				</label>
			</div>
		</h4>

		<span class="text-muted" ng-show="!vm.loaded()">
			<i class="fa fa-cog fa-spin"></i> Esperando datos...
		</span>

		<div class="ng-cloak" ng-show="vm.loaded()">
			<table id="table-rates" class="table table-striped table-bordered">
				<thead>
					<tr>
						<th></th>
						<th class="text-center">Compra</th>
						<th class="text-center">Venta</th>
					</tr>
				</thead>
				<tbody>
					<tr dbi-rate-row ng-repeat="rate in vm.rates" rate="rate" converters="vm.calculatorMode"></tr>
					<tr>
						<td class="gap-name">Brecha</td>
						<td class="gap-value">-</td>
						<td class="gap-value">{{vm.gap | number:0}}%</td>
					</tr>
				</tbody>
			</table>

			<div id="footer">
				<div>
					<strong>Última actualización de valores:</strong> {{vm.lastUpdated | amDateFormat:'DD/MM/YY &nbsp;HH:mm'}}
					<span ng-show="vm.refreshing !== null">
						·
						<a href="#" ng-click="vm.refreshRates()" ng-show="!vm.refreshing">Verificar ahora</a>
						<span class="text-muted" ng-show="vm.refreshing">Verificando...</span>
					</span>
				</div>
				<div id="source">Fuente: Bluelytics API</div>
			</div>
		</div>

	</div>
	<script src="/js/popup.js"></script>
</body>
</html>
